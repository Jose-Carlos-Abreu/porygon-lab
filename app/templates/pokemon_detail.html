{% extends "base.html" %}

{% block title %}{{ pokemon.nome|capitalize }} - Detalhes{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pokemon_detail.css') }}">

<div class="page-detail">
    <div class="container-detail">

        <div class="detail-header-top">
            <a href="{{ url_for('home.home') }}" class="btn-back">
                ← Voltar para Pokédex
            </a>
        </div>
    
        <div class="pokemon-detail-card">
            <header class="detail-header">
                <div class="main-image">
                    <img src="{{ url_for('static', filename='images/pokemons/' ~ pokemon.id ~ '.png') }}" alt="{{ pokemon.nome }}">
                </div>
                <div class="header-info">
                    <span class="pokemon-id">#{{ "%03d"|format(pokemon.id|int) }}</span>
                    <h2 class="pokemon-name">{{ pokemon.nome|capitalize }}</h2>
    
                    <div class="pokemon-types">
                        <span class="type-badge {{ pokemon.tipo1|lower }}">{{ pokemon.tipo1 }}</span>
                        {% if pokemon.tipo2 %}
                            <span class="type-badge {{ pokemon.tipo2|lower }}">{{ pokemon.tipo2 }}</span>
                        {% endif %}
                    </div>
                </div>
            </header>
    
            <section class="stats-section">
                <div class="info-grid">
                    <div class="info-box">
                        <span class="info-title">Altura</span>
                        <span class="info-value">{{ pokemon.altura }} m</span>
                    </div>
                    <div class="info-box">
                        <span class="info-title">Peso</span>
                        <span class="info-value">{{ pokemon.peso }} kg</span>
                    </div>
                    <div class="info-box">
                        <span class="info-title">Categoria</span>
                        <span class="info-value">{{ pokemon.categoria }}</span>
                    </div>
                </div>
    
                <div class="abilities-box">
                    <h3 class="section-title">Habilidades</h3>
                    <div class="abilities-list">
                        {% for habilidade in pokemon.habilidades.split('|') %}
                            <span class="ability-chip">
                                {{ habilidade.strip().replace('-', ' ')|capitalize }}
                            </span>
                        {% endfor %}
                    </div>
                </div>
            </section>
    
            <section class="weakness-section">
                <h3 class="section-title">Fraquezas</h3>
                <div class="pokemon-types">
                    {% for fraq in pokemon.fraquezas.split('|') %}
                        <span class="type-badge {{ fraq.strip()|lower }}">{{ fraq.strip() }}</span>
                    {% endfor %}
                </div>
            </section>
    
            <section class="evolution-section">
                <h3 class="section-title">Evoluções</h3>

                {% if evolutions %}
                    <div class="evolution-list">
                        {% for evo in evolutions %}
                            <a href="{{ url_for('home.pokemon_detail', pokemon_id=evo.id) }}" class="evolution-item">
                                <img src="{{ url_for('static', filename='images/pokemons/' ~ evo.id ~ '.png') }}" alt="{{ evo.nome }}">
                                <span>{{ evo.nome|capitalize }}</span>
                            </a>

                            {% if not loop.last %}
                                <span class="evolution-arrow">➜</span>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="empty-info">Este Pokémon não possui evoluções conhecidas.</p>
                {% endif %}
            </section>
        </div>
    </div>
</div>

{% endblock %}